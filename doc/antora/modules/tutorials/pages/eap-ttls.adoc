= EAP-TTLS: Tunneled authentication

*Goal:* To configure the server to use the EAP-TTLS authentication
protocol and to send and receive test packets.

*Time:* 20-35 minutes.

*File:*

- `sites-available/default`
- `mods-config/files/authorize`
- `eapol_test/ttls-pap.conf`

*Diagram:*

image::eap-ttls.svg[Fig. TTLS Packet]

== What is EAP-TTLS?

`EAP-TTLS` (Extensible Authentication Protocol - Tunneled Transport Layer Security) works in two phases:

** Phase 1 — A TLS tunnel is established using a server-side certificate. This encrypts all further communication.
** Phase 2 — Inside the encrypted tunnel, the user's credentials are sent using an inner authentication method (e.g. PAP).

This means the username and password are always protected inside the TLS tunnel.


For the initial testing of EAP-TTLS, we recommend using `PAP` on the
wireless client as the tunneled authentication protocol.

Once the wireless client has been configured to enable EAP-TTLS,
you should perform a test authentication to the server. If all goes well,
the server, AP, and wireless client should exchange multiple RADIUS
`Access-Request` and `Access-Challenge` packets. This process should take
a few seconds, and you should wait until it is done. If all goes well,
the final packet from the server should be an `Access-Accept` and should
contain the `MS-MPPE-Recv-Key` and `MS-MPPE-Send-Key` attributes.

Verify that the authentication succeeded by using the `ping` command to
see if the wireless client now has network access.

== Questions

1.  How is EAP-TTLS easier to use than EAP-TLS?
2.  What authentication protocols may be carried inside of the TLS
tunnel for EAP-TTLS?
3.  Would you use EAP-TTLS in a large deployment? If so, why? If not,
why not?

// Copyright (C) 2021 Network RADIUS SAS.  Licenced under CC-by-NC 4.0.
// This documentation was developed by Network RADIUS SAS.
