<?php
function init_encoder()
{
	$k = array(

		"~@"=>"Â€", "~A"=>"Â", "~B"=>"Â‚", "~C"=>"Âƒ", "~D"=>"Â„", "~E"=>"Â…",
		"~F"=>"Â†", "~G"=>"Â‡", "~H"=>"Âˆ", "~I"=>"Â‰", "~J"=>"ÂŠ", "~K"=>"Â‹",
		"~L"=>"ÂŒ", "~M"=>"Â", "~N"=>"ÂŽ", "~O"=>"Â", "~P"=>"Â", "~Q"=>"Â‘",
		"~R"=>"Â’", "~S"=>"Â“", "~T"=>"Â”", "~U"=>"Â•", "~V"=>"Â–", "~W"=>"Â—",
		"~^"=>"Âž", "~_"=>"ÂŸ", "| "=>"Â ", "¡"=>"Ê½", "¢"=>"Ê¼", "£"=>"Â£",
		"¤"=>"ï¿½", "¥"=>"ï¿½", "¦"=>"Â¦", "§"=>"Â§", "¨"=>"Â¨", "©"=>"Â©",
		"ª"=>"ï¿½", "«"=>"Â«", "¬"=>"Â¬", "­"=>"Â­", "®"=>"ï¿½", "¯"=>"â€•",
		"°"=>"Â°", "±"=>"Â±", "²"=>"Â²", "³"=>"Â³", "´"=>"Î„", "µ"=>"Î…",
		"¶"=>"Î†", "·"=>"Â·", "¸"=>"Îˆ", "¹"=>"Î‰", "º"=>"ÎŠ", "»"=>"Â»",
		"¼"=>"ÎŒ", "½"=>"Â½", "¾"=>"ÎŽ", "¿"=>"Î", "À"=>"Î", "Á"=>"Î‘",
		"Â"=>"Î’", "Ã"=>"Î“", "Ä"=>"Î”", "Å"=>"Î•", "Æ"=>"Î–", "Ç"=>"Î—",
		"È"=>"Î˜", "É"=>"Î™", "Ê"=>"Îš", "Ë"=>"Î›", "Ì"=>"Îœ", "Í"=>"Î",
		"Î"=>"Îž", "Ï"=>"ÎŸ", "Ð"=>"Î ", "Ñ"=>"Î¡", "Ò"=>"ï¿½", "Ó"=>"Î£",
		"Ô"=>"Î¤", "Õ"=>"Î¥", "Ö"=>"Î¦", "×"=>"Î§", "Ø"=>"Î¨", "Ù"=>"Î©",
		"Ú"=>"Îª", "Û"=>"Î«", "Ü"=>"Î¬", "Ý"=>"Î­", "Þ"=>"Î®", "ß"=>"Î¯",
		"à"=>"Î°", "á"=>"Î±", "â"=>"Î²", "ã"=>"Î³", "ä"=>"Î´", "å"=>"Îµ",
		"æ"=>"Î¶", "ç"=>"Î·", "è"=>"Î¸", "é"=>"Î¹", "ê"=>"Îº", "ë"=>"Î»",
		"ì"=>"Î¼", "í"=>"Î½", "î"=>"Î¾", "ï"=>"Î¿", "ð"=>"Ï€", "ñ"=>"Ï",
		"ò"=>"Ï‚", "ó"=>"Ïƒ", "ô"=>"Ï„", "õ"=>"Ï…", "ö"=>"Ï†", "÷"=>"Ï‡",
		"ø"=>"Ïˆ", "ù"=>"Ï‰", "ú"=>"ÏŠ", "û"=>"Ï‹", "ü"=>"ÏŒ", "ý"=>"Ï",
		"þ"=>"ÏŽ", "~X"=>"Â˜", "~Y"=>"Â™", "~Z"=>"Âš", "~["=>"Â›", "~]"=>"Â"
	);

	return $k;
}

function init_decoder()
{
	$k = array(
		"Â€"=>"~@", "Â"=>"~A", "Â‚"=>"~B", "Âƒ"=>"~C", "Â„"=>"~D", "Â…"=>"~E",
		"Â†"=>"~F", "Â‡"=>"~G", "Âˆ"=>"~H", "Â‰"=>"~I", "ÂŠ"=>"~J", "Â‹"=>"~K",
		"ÂŒ"=>"~L", "Â"=>"~M", "ÂŽ"=>"~N", "Â"=>"~O", "Â"=>"~P", "Â‘"=>"~Q",
		"Â’"=>"~R", "Â“"=>"~S", "Â”"=>"~T", "Â•"=>"~U", "Â–"=>"~V", "Â—"=>"~W",
		"Âž"=>"~^", "ÂŸ"=>"~_", "Â "=>"| ", "Ê½"=>"¡", "Ê¼"=>"¢", "Â£"=>"£",
		"ï¿½"=>"¤", "ï¿½"=>"¥", "Â¦"=>"¦", "Â§"=>"§", "Â¨"=>"¨", "Â©"=>"©",
		"ï¿½"=>"ª", "Â«"=>"«", "Â¬"=>"¬", "Â­"=>"­", "ï¿½"=>"®", "â€•"=>"¯",
		"Â°"=>"°", "Â±"=>"±", "Â²"=>"²", "Â³"=>"³", "Î„"=>"´", "Î…"=>"µ",
		"Î†"=>"¶", "Â·"=>"·", "Îˆ"=>"¸", "Î‰"=>"¹", "ÎŠ"=>"º", "Â»"=>"»",
		"ÎŒ"=>"¼", "Â½"=>"½", "ÎŽ"=>"¾", "Î"=>"¿", "Î"=>"À", "Î‘"=>"Á",
		"Î’"=>"Â", "Î“"=>"Ã", "Î”"=>"Ä", "Î•"=>"Å", "Î–"=>"Æ", "Î—"=>"Ç",
		"Î˜"=>"È", "Î™"=>"É", "Îš"=>"Ê", "Î›"=>"Ë", "Îœ"=>"Ì", "Î"=>"Í",
		"Îž"=>"Î", "ÎŸ"=>"Ï", "Î "=>"Ð", "Î¡"=>"Ñ", "ï¿½"=>"Ò", "Î£"=>"Ó",
		"Î¤"=>"Ô", "Î¥"=>"Õ", "Î¦"=>"Ö", "Î§"=>"×", "Î¨"=>"Ø", "Î©"=>"Ù",
		"Îª"=>"Ú", "Î«"=>"Û", "Î¬"=>"Ü", "Î­"=>"Ý", "Î®"=>"Þ", "Î¯"=>"ß",
		"Î°"=>"à", "Î±"=>"á", "Î²"=>"â", "Î³"=>"ã", "Î´"=>"ä", "Îµ"=>"å",
		"Î¶"=>"æ", "Î·"=>"ç", "Î¸"=>"è", "Î¹"=>"é", "Îº"=>"ê", "Î»"=>"ë",
		"Î¼"=>"ì", "Î½"=>"í", "Î¾"=>"î", "Î¿"=>"ï", "Ï€"=>"ð", "Ï"=>"ñ",
		"Ï‚"=>"ò", "Ïƒ"=>"ó", "Ï„"=>"ô", "Ï…"=>"õ", "Ï†"=>"ö", "Ï‡"=>"÷",
		"Ïˆ"=>"ø", "Ï‰"=>"ù", "ÏŠ"=>"ú", "Ï‹"=>"û", "ÏŒ"=>"ü", "Ï"=>"ý",
		"ÏŽ"=>"þ", "Â˜"=>"~X", "Â™"=>"~Y", "Âš"=>"~Z", "Â›"=>"~[", "Â"=>"~]"
	);

	return $k;
}

function encode_string($line,$k)
{
	for($i=0;$i<strlen($line);$i++){
		$c = $line{$i};
		$val = $k["$c"];
		$c = ($val != "") ? "$val" : "$c";
		$new_line .= $c;
	}

	return $new_line;
}

function decode_string($line,$k)
{
	$line = preg_replace("/&/","&&",$line);
	$line = preg_replace("/([,+0-9.\/() -])/", "%\\1", $line);
	$mline = chunk_split($line, 2, " ");
	$chars = explode(" ", $mline);
	foreach ($chars as $c){
		$val = $k["$c"];
		$c = ($val != "") ? "$val" : "$c";
		$new_line .= $c;
	}
	$new_line = preg_replace("/%%/", " ", $new_line);
	$new_line = preg_replace("/%([,+0-9.\/() -])/", "\\1", $new_line);
	$new_line = preg_replace("/%/", " ",$new_line);
	$new_line = preg_replace("/&&/","&",$new_line);

	return $new_line;
}
?>
