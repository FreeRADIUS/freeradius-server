# PRE: foreach foreach-break
#

#
# Adding attribute during request and immediately returning should still work
#
&request.Filter-Id := "1"
&request.Filter-Id += "2"
&request.Filter-Id += "3"
&request.Filter-Id += "4"
&request.Filter-Id += "5"

foreach &request.Filter-Id {
	if ("%{Foreach-Variable-0}" == "3") {
		success

		#
		#  We need this because the "return" below
		#  will prevent the "pap" module from being run
		#  in the "authorize" section.
		#
		&control.Auth-Type := PAP

		#
		#  Stop processing "authorize", and go to the next section.
		#
		return
	}

	if ("%{Foreach-Variable-0}" == "4") {
		test_fail
	}
}
