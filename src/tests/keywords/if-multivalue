#
# PRE: if
#

&request.Tmp-String-0 := 'foo'
&request.Tmp-String-0 += 'bar'
&request.Tmp-String-0 += 'baz'

&request.Tmp-String-1 := 'GROUP ADMINISTRATORS'
&request.Tmp-String-1 += 'GROUP STUDENTS'
&request.Tmp-String-1 += 'GROUP PEONS'

&request.Tmp-String-2 := 'PEONS'
&request.Tmp-String-2 += 'STUDENTS'
&request.Tmp-String-2 += 'ADMINISTRATORS'

&request.Tmp-String-3 := 'no'
&request.Tmp-String-3 += 'no'
&request.Tmp-String-3 += 'yes'

&request.Tmp-Integer-0 := 1
&request.Tmp-Integer-0 += 2
&request.Tmp-Integer-0 += 5

&control.Tmp-String-0 := 'foo'
&control.Tmp-String-0 += 'bar'
&control.Tmp-String-0 += 'baz'

&control.Tmp-String-1 := 'boink'
&control.Tmp-String-1 += 'tard'
&control.Tmp-String-1 += 'dink'
&control.Tmp-String-1 += 'slink'

&control.Tmp-Integer-0 := 01
&control.Tmp-Integer-0 += 02
&control.Tmp-Integer-0 += 05
&control.Tmp-Integer-0 += 04

&control.Tmp-Integer-1 := 10
&control.Tmp-Integer-1 += 20
&control.Tmp-Integer-1 += 30

#
#  Mmmm O(N^2)
#
if (&request.Tmp-String-0[*] != &control.Tmp-String-0[*]) {
	test_fail
}

if (&request.Tmp-String-0[*] == &control.Tmp-String-1[*]) {
	test_fail
}

if (&request.Tmp-String-1[*] == &control.Tmp-String-0[*]) {
	test_fail
}

#
#  Integer comparison and normalisation
#
if (&request.Tmp-Integer-0 != &control.Tmp-Integer-0) {
	test_fail
}

#
#  if any value of request.Tmp-Integer-0 > any value of
#  request.Tmp-Integer-1 then evaluate to true
#
if (&request.Tmp-Integer-0[*] > &control.Tmp-Integer-1[*]) {
	test_fail
}

#
#  Compiled regex comparisons
#
if (&request.Tmp-String-1[*] !~ /PEONS$/) {
	test_fail
}

if (&control.Tmp-String-1 =~ /PEONS$/) {
	test_fail
}

if (&control.Tmp-String-1 =~ /DINKS$/) {
	test_fail
}

#
#  Dynamic regex comparisons
#
if (&request.Tmp-String-1[*] !~ /%{Tmp-String-2[0]}$/) {
	test_fail
}

if (&request.Tmp-String-1 =~ /%{Tmp-String-2[1]}$/) {
	test_fail
}

if (&request.Tmp-String-1 !~ /%{Tmp-String-2[2]}$/) {
	test_fail
}

if (&request.Tmp-String-1 =~ /%{Tmp-String-2[#]}$/) {
	test_fail
}

#
#  XLAT virtual comparisons
#
if (&control.Tmp-Integer-0[*] != "%{control.Tmp-Integer-0[#]}") {
	test_fail
}

#
#  Literal comparisons
#
if (&control.Tmp-String-1[*] != 'boink') {
	test_fail
}

if (&control.Tmp-String-1[*] == 'foo') {
	test_fail
}

if (&request.Tmp-Integer-0[*] > 10) {
	test_fail
}

if (!(&request.Tmp-Integer-0[*] < 10)) {
	test_fail
}

success
