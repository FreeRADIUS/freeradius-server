subrequest Access-Request {
	#
	#  Prefix/attribute parsing disambiguation
	#
	&outer.request.Outer-Realm-Name := 'testing123'

	&request.User-Name := "obo"

	subrequest Access-Request {
		&request.User-Name := "jim"

		subrequest Access-Request {
			&request.User-Name := "joe"

			&outer.request.Tmp-String-0 := &current.User-Name
			&outer.request.Tmp-String-1 := &parent.User-Name
			&outer.request.Tmp-String-2 := &parent.parent.User-Name
			&outer.request.Tmp-String-3 := &parent.parent.parent.User-Name
			&outer.request.Tmp-String-4 := &outer.User-Name
			&outer.request.Tmp-String-5 := &current.outer.User-Name
			&outer.request.Tmp-String-6 := &parent.current.outer.User-Name
			&outer.request.Tmp-String-7 := "%{parent.parent.parent.parent.User-Name}"
			&outer.request.Tmp-String-8 := "%{outer.parent.User-Name}"
		}
	}
}

if (&Outer-Realm-Name != 'testing123') {
	test_fail
}

if (&Tmp-String-0 != 'joe') {
	test_fail
}

if (&Tmp-String-1 != 'jim') {
	test_fail
}

if (&tmp-String-2 != 'obo') {
	test_fail
}

if (&Tmp-String-3 != 'bob') {
	test_fail
}

if (&Tmp-String-4 != 'bob') {
	test_fail
}

if (&Tmp-String-5 != 'bob') {
	test_fail
}

if (&Tmp-String-6 != 'bob') {
	test_fail
}

if (&Tmp-String-7 != '') {
	test_fail
}

if (&Tmp-String-8 != '') {
	test_fail
}

success
