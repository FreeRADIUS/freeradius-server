#
#  PRE: update array
#

&request.Class := 0x01020304
&request.Class += 0x05060708
&request.Class += 0x090a0b0c

#
#  Use array references in the RHS
#  of the update section
#

&request.Proxy-State += &Class[0]
&request.Proxy-State += &Class[1]
&request.Proxy-State += &Class[2]

if (&request.Proxy-State != 0x01020304) {
	test_fail
}

#  Must be the same as above
if (&request.Proxy-State[0] != 0x01020304) {
	test_fail
}

if (&request.Proxy-State[1] != 0x05060708) {
	test_fail
}

if (&request.Proxy-State[2] != 0x090a0b0c) {
	test_fail
}

# must not exist
if (&request.Proxy-State[3]) {
	test_fail
}

success
