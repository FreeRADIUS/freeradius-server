json {
	encode {
		output_mode = object_simple
	}
}

kafka {

	bootstrap-servers = "localhost:9092"
	topic = "radius"

	global-config {
		test.mock.num.brokers = 3
	}

	topic-config {
	}

	authorize {
		key = "%{User-Name}"
		message = "%{json_encode:&request:[*]}"
	}

	post-auth {
		key = "%{User-Name}"
		reference = "messages.%{%{reply:Packet-Type}:-default}"
		messages {
			Access-Accept = "%{json_encode:&User-Name &reply:[*]}"
		}
	}

	accounting {
		key = "%{Acct-Unique-Session-Id}"
		reference = "messages.%{%{Acct-Status-Type}:-unknown}"
		messages {
			Start = "%{json_encode:&request:[*]}"
		}
	}

}
